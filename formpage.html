<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Collectors Corner - Join Our Collection</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <style>
/* HERO (Form Page) */
.join-hero {
  display: flex;
  justify-content: space-between;
  gap: 2rem;
  padding: 3rem;
}
.hero-text {
  flex: 1;
}
.hero-text h1 {
  font-size: 2rem;
  margin-bottom: 1rem;
}
.hero-text .sub {
  font-size: 1.2rem;
  color: #555;
  margin-bottom: 1rem;
}
.hero-images {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
  flex: 1;
}
.hero-images img {
  width: 100%;
  height: 200px;
  object-fit: cover;
  border-radius: 6px;
}

/* FORM */
.join-form {
  padding: 2rem 3rem;
}
.join-form h2 {
  margin-bottom: 1.5rem;
  font-size: 1.3rem;
}
.form-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem 2rem;
}
.form-grid label {
  display: flex;
  flex-direction: column;
  font-weight: 500;
}
.form-grid input[type="text"],
.form-grid input[type="email"],
.form-grid input[type="file"],
.form-grid textarea {
  margin-top: 0.3rem;
  padding: 0.5rem;
  border: 1px solid #ccc;
  border-radius: 6px;
  font-family: inherit;
  font-size: 0.95rem;
}
.form-grid input[type="file"] {
  padding: 0.35rem;
}
.preview-row {
  margin-top: 0.5rem;
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
}
.preview-row img {
  width: 90px;
  height: 70px;
  object-fit: cover;
  border-radius: 6px;
  border: 1px solid #ddd;
}

/* single-column fallback for small screens */
@media (max-width: 800px) {
  .join-hero { flex-direction: column; }
  .hero-images { grid-template-columns: repeat(2, 1fr); }
  .form-grid { grid-template-columns: 1fr; }
}

.submit-btn {
  margin-top: 2rem;
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 6px;
  background: #000;
  color: #fff;
  font-weight: 600;
  cursor: pointer;
}
.submit-btn:hover {
  background: #333;
}

.error-note {
  color: #a00;
  font-size: 0.9rem;
  margin-top: 0.25rem;
}
.help-note {
  font-size: 0.9rem;
  color: #666;
  margin-top: 0.25rem;
}
input[type="file"] {
  background-color: #fff;
  border: 1px solid #ccc;
  border-radius: 6px;
  padding: 0.4rem;
  font-family: inherit;
  font-size: 0.95rem;
  width: 100%;
  color: #333;
}
.form-grid input,
.form-grid textarea,
.form-grid select {
  width: 100%;
  box-sizing: border-box;
}
</style>
</head>
<body>
  <!-- Header -->
  <header class="site-header">
    <div class="logo">
      <img src="images/Logo.png" alt="Collectors Corner Logo" />
    </div>
    <nav>
      <span>Featured Collections:</span>
      <a href="Mac.html">Mac’s Collection</a>
      <a href="Calixpage">Calix’s Collection</a>
      <a href="#" class="btn">Contact</a>
    </nav>
  </header>

  <!-- Hero / Intro -->
  <section class="join-hero">
    <div class="hero-text">
      <h1>Become part of <em>our</em> Collection.</h1>
      <p class="sub">Join a growing group of collectors on our website.</p>
      <p>Do you have a collection you’re passionate about?</p>
      <p>Why not show the world? Whether you’re into vintage coins, delicate teacups, funky gadgets, or quirky keepsakes, every collection says something unique about you. Share your passion, connect with fellow collectors, and let your treasures shine in our growing community!</p>
    </div>
    <div class="hero-images">
      <img src="images/GettyImages-1360671016-9778338fe2ea4066b330935ba0939c59.webp" alt="collection image 1">
      <img src="images/entire-history-of-germany-told-thru-the-5-pfennig-coinage-v0-y7w4nvfa82pf1.webp" alt="collection image 2">
      <img src="images/my-mini-baseball-bat-collection-from-most-mlb-stadiums-v0-rw9juxf6deof1.webp" alt="collection image 3">
      <img src="images/only-recently-i-started-collecting-view-master-reels-v0-hit4w2xfpykf1.webp" alt="collection image 4">
    </div>
  </section>

  <!-- Form -->
  <section class="join-form">
    <h2 style="color: #333; text-decoration: underline;">Enter your details below:</h2>
    <form novalidate>
      <div class="form-grid">
        <label>
          Name
          <input type="text" name="name" placeholder="Jane" required>
        </label>

        <label>
          Collection Topic
          <input type="text" name="topic" placeholder="Baseballs" required>
        </label>

        <label>
          Email address
          <input type="email" name="email" placeholder="email@janesfakedomain.net" required>
        </label>

        <label>
          Description of Collection
          <input type="text" name="description" placeholder="Enter here" required>
        </label>

        <label>
          Featured Item
          <input type="text" name="featured-item" placeholder="Enter here" required>
        </label>

        <!-- FEATURED IMAGE (file input) -->
        <label>
          Image of Featured Item
          <input type="file" name="featured-image" accept="image/*" aria-describedby="featured-help">
          <div id="featured-help" class="help-note">Recommended: JPG/PNG. Max 5MB.</div>
          <div class="preview-row" data-preview-for="featured-image" aria-hidden="true"></div>
          <div class="error-note" data-error-for="featured-image" aria-hidden="true"></div>
        </label>

        <label>
          Description of Featured Item
          <input type="text" name="featured-description" placeholder="Enter here">
        </label>

        <!-- OTHER IMAGES (multiple file input) -->
        <label>
          Other Collection images
          <input type="file" name="other-images" accept="image/*" multiple aria-describedby="other-help">
          <div id="other-help" class="help-note">You can select multiple images. Up to 6 images, each max 5MB.</div>
          <div class="preview-row" data-preview-for="other-images" aria-hidden="true"></div>
          <div class="error-note" data-error-for="other-images" aria-hidden="true"></div>
        </label>

        <label>
          Other Collection fun facts
          <input type="text" name="fun-facts" placeholder="Enter here">
        </label>
      </div>

      <button type="submit" class="submit-btn">Submit</button>
    </form>
  </section>

  <footer>
  <div class="footer-container">
    <!-- Left: logo + socials -->
    <div class="footer-left">
      <a href="index.html"><img src="images/Logo.png" alt="Collectors Corner Logo"></a>
      <div class="socials">
        <a href="https://facebook.com" class="icon fb" aria-label="Facebook"></a>
        <a href="https://linkedin.com" class="icon li" aria-label="LinkedIn"></a>
        <a href="https://youtube.com" class="icon yt" aria-label="YouTube"></a>
        <a href="https://instagram.com" class="icon ig" aria-label="Instagram"></a>
      </div>
    </div>

    <!-- Right: footer links -->
    <div class="footer-right">
      <div>
        <h4>Partners</h4>
        <p>Mac</p>
        <p>Ty</p>
        <p>Calix</p>
      </div>
      <div>
        <h4>About</h4>
        <p>Projects</p>
        <p>Jobs</p>
      </div>
      <div>
        <h4>Support</h4>
        <p>Contact</p>
        <p>Page</p>
      </div>
    </div>
  </div>

  <p class="copyright">© Collectors corner</p>
</footer>

<script>
(function () {
  const MAX_FILE_SIZE = 5 * 1024 * 1024; // 5 MB
  const MAX_OTHER_IMAGES = 6;

  const form = document.querySelector('form');
  if (!form) return;

  const byName = (n) => form.querySelector(`[name="${n}"]`);
  const previewFor = (name) => form.querySelector(`.preview-row[data-preview-for="${name}"]`);
  const errorFor = (name) => form.querySelector(`.error-note[data-error-for="${name}"]`);

  const fields = {
    name: byName('name'),
    topic: byName('topic'),
    email: byName('email'),
    description: byName('description'),
    featuredItem: byName('featured-item'),
    featuredImage: byName('featured-image'), // file input
    featuredDescription: byName('featured-description'),
    otherImages: byName('other-images'),     // multi file input
    funFacts: byName('fun-facts')
  };

  const isValidEmail = (v) => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v);

  const setErr = (el, msg) => {
    if (!el) return;
    // for file inputs we use the error note element; for others rely on setCustomValidity
    if (el.type === 'file') {
      const errEl = errorFor(el.name);
      if (errEl) {
        errEl.textContent = msg || '';
        errEl.style.display = msg ? 'block' : 'none';
        errEl.setAttribute('aria-hidden', msg ? 'false' : 'true');
      }
      // set browser validity too so reportValidity can operate
      try { el.setCustomValidity(msg || ''); } catch (e) {}
    } else {
      try { el.setCustomValidity(msg || ''); } catch (e) {}
      const errEl = errorFor(el.name);
      if (errEl) {
        errEl.textContent = msg || '';
        errEl.style.display = msg ? 'block' : 'none';
        errEl.setAttribute('aria-hidden', msg ? 'false' : 'true');
      }
    }
  };

  function renderPreviewForFileInput(inputEl, container) {
    if (!container) return;
    container.innerHTML = '';
    const files = inputEl.files || [];
    if (!files.length) {
      container.setAttribute('aria-hidden', 'true');
      return;
    }
    container.setAttribute('aria-hidden', 'false');

    Array.from(files).forEach(file => {
      if (!file.type.startsWith('image/')) return;
      const img = document.createElement('img');
      img.alt = file.name;
      container.appendChild(img);

      const reader = new FileReader();
      reader.onload = (e) => img.src = e.target.result;
      reader.readAsDataURL(file);
    });
  }

  function getValidationMessage(name) {
    const el = fields[name];
    if (!el) return '';
    const type = el.type;
    if (type === 'file') {
      // file-specific validation
      const files = el.files || [];
      if (name === 'featuredImage') {
        if (files.length === 0) return ''; // featured image optional
        const f = files[0];
        if (!f.type.startsWith('image/')) return 'Featured file must be an image.';
        if (f.size > MAX_FILE_SIZE) return 'Featured image must be 5MB or smaller.';
        return '';
      } else if (name === 'otherImages') {
        if (files.length === 0) return '';
        if (files.length > MAX_OTHER_IMAGES) return `You may upload up to ${MAX_OTHER_IMAGES} images.`;
        for (let f of files) {
          if (!f.type.startsWith('image/')) return 'One or more files are not images.';
          if (f.size > MAX_FILE_SIZE) return 'Each image must be 5MB or smaller.';
        }
        return '';
      }
      return '';
    }

    const val = (el.value || '').trim();

    switch (name) {
      case 'name':
        if (!val) return 'Name is required.';
        if (val.length < 2) return 'Name must be at least 2 characters.';
        return '';
      case 'topic':
        if (!val) return 'Collection topic is required.';
        return '';
      case 'email':
        if (!val) return 'Email is required.';
        if (!isValidEmail(val)) return 'Please enter a valid email address.';
        return '';
      case 'description':
        if (!val) return 'Description is required.';
        if (val.length < 10) return 'Description should be at least 10 characters.';
        return '';
      case 'featuredItem':
        if (!val) return 'Featured item is required.';
        return '';
      case 'funFacts':
        if (val.length > 300) return 'Fun facts must be 300 characters or fewer.';
        return '';
      default:
        return '';
    }
  }

  // wire up input/change handlers
  Object.keys(fields).forEach((name) => {
    const el = fields[name];
    if (!el) return;

    const notify = () => {
      const msg = getValidationMessage(name);
      setErr(el, msg);
      if (msg && el.type !== 'file') el.reportValidity();
    };

    if (el.type === 'file') {
      // render preview on change and validate
      el.addEventListener('change', () => {
        // previews
        const container = previewFor(el.name);
        renderPreviewForFileInput(el, container);
        // validate
        notify();
      });
    } else {
      el.addEventListener('input', notify);
      el.addEventListener('blur', () => {
        const msg = getValidationMessage(name);
        setErr(el, msg);
        if (msg) el.reportValidity();
      });
    }
  });

  form.addEventListener('submit', (ev) => {
    ev.preventDefault();

    let firstInvalid = null;
    Object.keys(fields).forEach((name) => {
      const el = fields[name];
      if (!el) return;
      const msg = getValidationMessage(name);
      setErr(el, msg);
      if (msg && !firstInvalid) firstInvalid = el;
    });

    if (firstInvalid) {
      // If it's a file input, focus and show the error element (reportValidity may not always show)
      if (firstInvalid.type === 'file') {
        const errEl = errorFor(firstInvalid.name);
        if (errEl) errEl.scrollIntoView({behavior: 'smooth', block: 'center'});
      } else {
        firstInvalid.reportValidity();
      }
      return;
    }

    // All validation passed — show success popup
    alert("Form Successfully Submitted!");

    // TODO: replace with actual submit logic (AJAX / form action)
    form.reset();

    // clear previews
    const previewRows = form.querySelectorAll('.preview-row');
    previewRows.forEach(r => r.innerHTML = '');
  });

})();
</script>
</body>
</html>
